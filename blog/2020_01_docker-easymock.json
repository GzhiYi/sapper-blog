{"title":"2020/01/docker-easymock.md","path":"2020/01/docker-easymock","slug":"2020_01_docker-easymock","html":"<p>为了方便本地mock接口，需要在本地用docker跑一个easy-mock服务。第一时间想到docker运行，方便管理和使用。基本上是非常简单就可以跑起来的。所以在这记录一下安装easy-mock的步骤，也为了下次更快的安装。</p>\n<blockquote>\n<p>假设在目录<code>/Users/{{用户目录名}}/easymock</code>存放easy-mock配置。\n当然需要先安装好docker啦，不再赘述。</p>\n</blockquote>\n<h2 id=\"docker-compose文件\">Docker compose文件</h2>\n<p>x在easymock目录下新建一个docker-compose.yml文件，内容如下：</p>\n<pre><code class=\"language-yml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">'3'</span>\n\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">mongodb:</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">mongo:3.4.1</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-comment\"># ./data/db 数据库文件存放地址，根据需要修改为本地地址</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">'./data/db:/Users/<span class=\"hljs-template-variable\">{{用户目录名}}</span>/easymock/data/db'</span>\n    <span class=\"hljs-attr\">networks:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">easy-mock</span>\n    <span class=\"hljs-attr\">restart:</span> <span class=\"hljs-string\">always</span>\n\n  <span class=\"hljs-attr\">redis:</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">redis:4.0.6</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">redis-server</span> <span class=\"hljs-string\">--appendonly</span> <span class=\"hljs-literal\">yes</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-comment\"># ./data/redis redis 数据文件存放地址，根据需要修改为本地地址</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">'./data/redis:/Users/<span class=\"hljs-template-variable\">{{用户目录名}}</span>/easymock/data'</span>\n    <span class=\"hljs-attr\">networks:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">easy-mock</span>\n    <span class=\"hljs-attr\">restart:</span> <span class=\"hljs-string\">always</span>\n\n  <span class=\"hljs-attr\">web:</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">easymock/easymock:1.6.0</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">/bin/bash</span> <span class=\"hljs-string\">-c</span> <span class=\"hljs-string\">\"npm start\"</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">7300</span><span class=\"hljs-string\">:7300</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-comment\"># 日志地址，根据需要修改为本地地址</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">'./logs:/Users/<span class=\"hljs-template-variable\">{{用户目录名}}</span>/easymock/easy-mock/logs'</span>\n      <span class=\"hljs-comment\"># 配置地址，请使用本地配置地址替换</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">'./production.json:/Users/<span class=\"hljs-template-variable\">{{用户目录名}}</span>/easymock/easy-mock/config'</span>\n    <span class=\"hljs-attr\">networks:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">easy-mock</span>\n    <span class=\"hljs-attr\">restart:</span> <span class=\"hljs-string\">always</span>\n\n<span class=\"hljs-attr\">networks:</span>\n  <span class=\"hljs-attr\">easy-mock:</span></code></pre>\n<h2 id=\"运行\">运行</h2>\n<p><code>docker-compose up -d</code>即可运行。</p>\n<pre><code class=\"language-bash\">easymock_redis_1 is up-to-date\neasymock_mongodb_1 is up-to-date\neasymock_web_1 is up-to-date</code></pre>\n<p>后打开<code>localhost:7300</code></p>\n","fmData":{"attributes":{"title":"Docker安装easymock","description":"为了方便本地mock接口，需要在本地用docker跑一个easy-mock服务。第一时间想到docker运行，方便管理和使用。基本上是非常简单就可以跑起来的。所以在这记录一下安装easy-mock的步骤，也为了下次更快的安装。","keywords":"docker,esaymock,api","labels":["前端"],"date":"2020-01-20T00:00:00.000Z"},"body":"为了方便本地mock接口，需要在本地用docker跑一个easy-mock服务。第一时间想到docker运行，方便管理和使用。基本上是非常简单就可以跑起来的。所以在这记录一下安装easy-mock的步骤，也为了下次更快的安装。\n\n> 假设在目录`/Users/{{用户目录名}}/easymock`存放easy-mock配置。\n> 当然需要先安装好docker啦，不再赘述。\n\n## Docker compose文件\n\nx在easymock目录下新建一个docker-compose.yml文件，内容如下：\n\n```yml\nversion: '3'\n\nservices:\n  mongodb:\n    image: mongo:3.4.1\n    volumes:\n      # ./data/db 数据库文件存放地址，根据需要修改为本地地址\n      - './data/db:/Users/{{用户目录名}}/easymock/data/db'\n    networks:\n      - easy-mock\n    restart: always\n\n  redis:\n    image: redis:4.0.6\n    command: redis-server --appendonly yes\n    volumes:\n      # ./data/redis redis 数据文件存放地址，根据需要修改为本地地址\n      - './data/redis:/Users/{{用户目录名}}/easymock/data'\n    networks:\n      - easy-mock\n    restart: always\n\n  web:\n    image: easymock/easymock:1.6.0\n    command: /bin/bash -c \"npm start\"\n    ports:\n      - 7300:7300\n    volumes:\n      # 日志地址，根据需要修改为本地地址\n      - './logs:/Users/{{用户目录名}}/easymock/easy-mock/logs'\n      # 配置地址，请使用本地配置地址替换\n      - './production.json:/Users/{{用户目录名}}/easymock/easy-mock/config'\n    networks:\n      - easy-mock\n    restart: always\n\nnetworks:\n  easy-mock:\n```\n\n## 运行\n\n`docker-compose up -d`即可运行。\n\n```bash\neasymock_redis_1 is up-to-date\neasymock_mongodb_1 is up-to-date\neasymock_web_1 is up-to-date\n```\n后打开`localhost:7300`","bodyBegin":9,"frontmatter":"title: Docker安装easymock\ndescription: 为了方便本地mock接口，需要在本地用docker跑一个easy-mock服务。第一时间想到docker运行，方便管理和使用。基本上是非常简单就可以跑起来的。所以在这记录一下安装easy-mock的步骤，也为了下次更快的安装。\nkeywords: docker,esaymock,api\nlabels: ['前端']\ndate: 2020-01-20"}}