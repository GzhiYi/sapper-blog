<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=Mrn4dXO3Z_939geeswIgr2wIpspT6n7X5cX1Tjp69Ko name=google-site-verification> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=atom-one-light.min.css rel=stylesheet> <link href=client/client-e118e612.css rel=stylesheet> <title>用firebase给静态博客页面增加点赞功能-GzhiYi's blog</title><meta content=用firebase给静态博客页面增加点赞功能 name=description data-svelte=svelte-2vncnt><meta content=firebase,like name=keywords data-svelte=svelte-2vncnt> <link href=/client/client.1c84caa9.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-e118e612.css rel=preload as=style><link href=/client/[slug].9af4de7d.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/config.026ad977.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials></head> <body> <div id=sapper> <nav class=svelte-1dbd5up><ul class=svelte-1dbd5up><li class=svelte-1dbd5up><a href=. class=svelte-1dbd5up>home</a></li> <li class=svelte-1dbd5up><a href=about class=svelte-1dbd5up>about</a></li> <li class=svelte-1dbd5up><a href=blog class=svelte-1dbd5up aria-current=page rel=prefetch>blog</a></ul></nav> <main class=svelte-1uhnsl8> <div class=flex><div class=base><div class=title>用firebase给静态博客页面增加点赞功能</div> <span>2020-06-28</span></div> <div class=content><p>想给博客增加一个点赞功能。最后，看起来就是这样：</p> <p><img align=center alt=like data-zoomable src=https://i.loli.net/2020/06/28/Ej9in7gr5uNHIJO.jpg style=width:100%></p> <p>实现这个功能要考虑几个问题：</p> <ol> <li>没有服务器，接口怎么编写部署？</li> <li>博客没有登录，数据库设计的时候怎么识别用户唯一性。</li> </ol> <h2 id=firebase>Firebase</h2> <p>对于firebase的介绍，最好是直接进入<a href=https://firebase.google.com target=_blank>主站</a>开通spark版尝试。</p> <p>使用firebase，就可以很好的解决第一个问题。spark方案提供免费的空间支持，对于博客这种量级小，交互少的页面来说再适合不过了。</p> <p>如果用过tx云的云开发，就可以知道，其实概念有些相似，甚至在云函数的编写上也有几分相似。</p> <h2 id=fingerprintjs2>fingerprintjs2</h2> <p>利用<a href=https://github.com/fingerprintjs/fingerprintjs2 target=_blank>fingerprintjs2</a>，可以通过user agent等信息生成用户唯一的一个ID，虽然不能100%保证用户唯一性，但对于无需登录的博客而言，已经足够了。 生成指纹的主要用法：</p> <pre><code class=language-javascript><span class=hljs-attribute>Fingerprint2</span>.x<span class=hljs-number>64</span>hash<span class=hljs-number>128</span>(values.join(''), <span class=hljs-number>31</span>)
</code></pre> <h2 id=过程>过程</h2> <p>整个过程，时间大部分花在云函数执行数据库操作语法上。以下前提是开通了firebase的spark方案，开通方式直接明了就不赘述啦。</p> <h3 id=控制台>控制台</h3> <p>需要在控制台创建你的一个项目，创建好项目之后再执行下面的步骤。</p> <h3 id=函数（functions）编写>函数（functions）编写</h3> <p>相关代码可以查看：<a href=https://github.com/GzhiYi/blog-like/blob/master/functions/index.js target=_blank>blog-like</a></p> <ol> <li>安装Firebase CLI工具以初始化函数仓库。</li> </ol> <pre><code class=language-bash>npm <span class=hljs-keyword>install</span> -g firebase-tools
</code></pre> <ol start=2> <li>登录</li> </ol> <pre><code class=language-bash><span class=hljs-attribute>firebase login</span>
</code></pre> <ol start=3> <li>创建一个空目录，然后初始化这个目录，例如目录名为blog-like</li> </ol> <pre><code class=language-bash>mkdir blog-<span class=hljs-meta>like</span> <span class=hljs-variable>&&</span> cd blog-<span class=hljs-meta>like</span> <span class=hljs-variable>&&</span> firebase init
</code></pre> <p>执行init命令后会提示选择新建项目的一些规则。（以下是规则过程）</p> <p><code>q: Which Firebase CLI features do you want to set up for this folder? Press Space to select features, then Enter to confirm your choices.</code> <code>a: 选择Firestore: Deploy rules and create indexes for Firestore以及Functions: Configure and deploy Cloud Functions</code> </p> <p><code>q: Please select an option:</code> <code>a: Use an existing project，随后选择在控制台创建的项目。</code></p> <p>随后几个按enter就好了。</p> <ol start=4> <li>函数编写。</li> </ol> <p>需要两个接口，一个是新增点赞接口，路由为：<code>/newLike</code>，一个是获取点赞数据的接口，路由为：<code>/getLikes</code>。</p> <ul> <li>newLike。先判断该用户是否已经点过赞。需要存储的数据：文章标题、点赞时间、用户指纹。</li> <li>getLikes。先获取该文章点赞总数，在判断用户是否已经点过赞。</li> </ul> <p>有了以下基本代码：</p> <p>点赞数据表：</p> <pre><code class=language-json>{
    <span class=hljs-attribute>id:</span><span class=hljs-string> 用户指纹，
    likeTime</span>：点赞时间，
    postTitle：文章标题
}
</code></pre> <p>newLike，创建点赞数据：</p> <pre><code class=language-javascript>db<span class=hljs-built_in>.collection</span>(<span class=hljs-string>'like'</span>)
  .<span class=hljs-keyword>where</span>(<span class=hljs-string>"postTitle"</span>, <span class=hljs-string>"=="</span>, request.body.title)
  .get()
  .<span class=hljs-keyword>then</span>(res => {
  <span class=hljs-keyword>let</span> isLike =<span class=hljs-built_in> false</span>
  <span class=hljs-keyword>try</span> {
    // 判断是否已经点赞过
    res.forEach<span class=hljs-built_in>(doc</span> => {
      <span class=hljs-keyword>if</span> <span class=hljs-built_in>(doc</span><span class=hljs-built_in>.id</span> === request.body<span class=hljs-built_in>.id</span> && !isLike) {
        isLike =<span class=hljs-built_in> true</span>
      }
    })
    <span class=hljs-keyword>if</span> (!isLike) {
      <span class=hljs-keyword>let</span> docRef = db<span class=hljs-built_in>.collection</span>(<span class=hljs-string>'like'</span>)<span class=hljs-built_in>.doc</span>(params<span class=hljs-built_in>.id</span>);
      docRef.set({
        postTitle: params.title,
        likeTime: new Date().toLocaleString()
      });
      response.send({
        data: <span class=hljs-string>'like success!'</span>,
        code: <span class=hljs-number>0</span>
      })
    } <span class=hljs-keyword>else</span> {
      response.send({
        data: <span class=hljs-string>''</span>,
        message: <span class=hljs-string>'like 过啦'</span>,
        code: <span class=hljs-number>1</span>
      })
    }
  } <span class=hljs-keyword>catch</span> <span class=hljs-built_in>(error</span>) {
    console.log(<span class=hljs-string>'error'</span>,<span class=hljs-built_in> error</span>)
  }
})
</code></pre> <p>getLikes，获取点赞数据：</p> <pre><code class=language-javascript>db<span class=hljs-built_in>.collection</span>(<span class=hljs-string>'like'</span>)
  .<span class=hljs-keyword>where</span>(<span class=hljs-string>"postTitle"</span>, <span class=hljs-string>"=="</span>, title)
  .get()
  .<span class=hljs-keyword>then</span>(res => {
  <span class=hljs-keyword>let</span> isLike =<span class=hljs-built_in> false</span>
  <span class=hljs-keyword>try</span> {
    res.forEach<span class=hljs-built_in>(doc</span> => {
      <span class=hljs-keyword>if</span> <span class=hljs-built_in>(doc</span><span class=hljs-built_in>.id</span> ===<span class=hljs-built_in> id</span> && !isLike) {
        isLike =<span class=hljs-built_in> true</span>
      }
    })
  } <span class=hljs-keyword>catch</span> <span class=hljs-built_in>(error</span>) {
    console.log(<span class=hljs-string>'error'</span>,<span class=hljs-built_in> error</span>)
  }
  response.send({
    data: res.size,
    isLike,
    message: <span class=hljs-string>'oooooooook'</span>,
    code: <span class=hljs-number>0</span>
  })
})
  .<span class=hljs-keyword>catch</span><span class=hljs-built_in>(error</span> => {
  response.send({
    data:<span class=hljs-built_in> error</span>,
    message: request.body,
    code: <span class=hljs-number>1</span>
  })
})
</code></pre> <p>在函数编写之后，执行命令就可以部署到云端啦。</p> <pre><code class=language-bash>firebase <span class=hljs-keyword>deploy</span> <span class=hljs-params>--only</span> functions
</code></pre> <h2 id=用户端>用户端</h2> <p>在博客页面上生成用户唯一ID后用fetch请求点赞接口就可以了。</p> <p>另外，跨域问题需要函数端用上cors处理。详细的都可以在<a href=https://github.com/GzhiYi/blog-like target=_blank>仓库</a>看到。</p> <h2 id=体验>体验</h2> <p>最后说一下体验。整个开发过程比较愉快，花了点点时间查阅数据库操作语法。上线尝试访问，发现google的果然访问好慢！</p> <p>你可以点击下面clap按钮试试，如果没有，说明网络问题，unreachable。</p> </div> </div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,(function(a){return {post:{title:a,description:a,keywords:"firebase,like",labels:["前端"],date:"2020-06-28",path:"2020\u002F06\u002Ffirebase.md",slug:"2020_06_firebase",html:"\u003Cp\u003E想给博客增加一个点赞功能。最后，看起来就是这样：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg align=\"center\" style=\"width: 100%;\" data-zoomable src=\"https:\u002F\u002Fi.loli.net\u002F2020\u002F06\u002F28\u002FEj9in7gr5uNHIJO.jpg\" alt=\"like\" \u003E\u003C\u002Fp\u003E\n\u003Cp\u003E实现这个功能要考虑几个问题：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E没有服务器，接口怎么编写部署？\u003C\u002Fli\u003E\n\u003Cli\u003E博客没有登录，数据库设计的时候怎么识别用户唯一性。\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch2 id=\"firebase\"\u003EFirebase\u003C\u002Fh2\u003E\n\u003Cp\u003E对于firebase的介绍，最好是直接进入\u003Ca target='_blank'  href=\"https:\u002F\u002Ffirebase.google.com\"\u003E主站\u003C\u002Fa\u003E开通spark版尝试。\u003C\u002Fp\u003E\n\u003Cp\u003E使用firebase，就可以很好的解决第一个问题。spark方案提供免费的空间支持，对于博客这种量级小，交互少的页面来说再适合不过了。\u003C\u002Fp\u003E\n\u003Cp\u003E如果用过tx云的云开发，就可以知道，其实概念有些相似，甚至在云函数的编写上也有几分相似。\u003C\u002Fp\u003E\n\u003Ch2 id=\"fingerprintjs2\"\u003Efingerprintjs2\u003C\u002Fh2\u003E\n\u003Cp\u003E利用\u003Ca target='_blank'  href=\"https:\u002F\u002Fgithub.com\u002Ffingerprintjs\u002Ffingerprintjs2\"\u003Efingerprintjs2\u003C\u002Fa\u003E，可以通过user agent等信息生成用户唯一的一个ID，虽然不能100%保证用户唯一性，但对于无需登录的博客而言，已经足够了。\n生成指纹的主要用法：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"hljs-attribute\"\u003EFingerprint2\u003C\u002Fspan\u003E.x\u003Cspan class=\"hljs-number\"\u003E64\u003C\u002Fspan\u003Ehash\u003Cspan class=\"hljs-number\"\u003E128\u003C\u002Fspan\u003E(values.join(&#x27;&#x27;), \u003Cspan class=\"hljs-number\"\u003E31\u003C\u002Fspan\u003E)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 id=\"过程\"\u003E过程\u003C\u002Fh2\u003E\n\u003Cp\u003E整个过程，时间大部分花在云函数执行数据库操作语法上。以下前提是开通了firebase的spark方案，开通方式直接明了就不赘述啦。\u003C\u002Fp\u003E\n\u003Ch3 id=\"控制台\"\u003E控制台\u003C\u002Fh3\u003E\n\u003Cp\u003E需要在控制台创建你的一个项目，创建好项目之后再执行下面的步骤。\u003C\u002Fp\u003E\n\u003Ch3 id=\"函数（functions）编写\"\u003E函数（functions）编写\u003C\u002Fh3\u003E\n\u003Cp\u003E相关代码可以查看：\u003Ca target='_blank'  href=\"https:\u002F\u002Fgithub.com\u002FGzhiYi\u002Fblog-like\u002Fblob\u002Fmaster\u002Ffunctions\u002Findex.js\"\u003Eblog-like\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E安装Firebase CLI工具以初始化函数仓库。\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003Enpm \u003Cspan class=\"hljs-keyword\"\u003Einstall\u003C\u002Fspan\u003E -g firebase-tools\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Col start=\"2\"\u003E\n\u003Cli\u003E登录\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"hljs-attribute\"\u003Efirebase login\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Col start=\"3\"\u003E\n\u003Cli\u003E创建一个空目录，然后初始化这个目录，例如目录名为blog-like\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003Emkdir blog-\u003Cspan class=\"hljs-meta\"\u003Elike\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable\"\u003E&amp;&amp;\u003C\u002Fspan\u003E cd blog-\u003Cspan class=\"hljs-meta\"\u003Elike\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable\"\u003E&amp;&amp;\u003C\u002Fspan\u003E firebase init\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E执行init命令后会提示选择新建项目的一些规则。（以下是规则过程）\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Eq: Which Firebase CLI features do you want to set up for this folder? Press Space to select features, then Enter to confirm your choices.\u003C\u002Fcode\u003E\n\u003Ccode\u003Ea: 选择Firestore: Deploy rules and create indexes for Firestore以及Functions: Configure and deploy Cloud Functions\u003C\u002Fcode\u003E  \u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Eq: Please select an option:\u003C\u002Fcode\u003E\n\u003Ccode\u003Ea: Use an existing project，随后选择在控制台创建的项目。\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E随后几个按enter就好了。\u003C\u002Fp\u003E\n\u003Col start=\"4\"\u003E\n\u003Cli\u003E函数编写。\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E需要两个接口，一个是新增点赞接口，路由为：\u003Ccode\u003E\u002FnewLike\u003C\u002Fcode\u003E，一个是获取点赞数据的接口，路由为：\u003Ccode\u003E\u002FgetLikes\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EnewLike。先判断该用户是否已经点过赞。需要存储的数据：文章标题、点赞时间、用户指纹。\u003C\u002Fli\u003E\n\u003Cli\u003EgetLikes。先获取该文章点赞总数，在判断用户是否已经点过赞。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E有了以下基本代码：\u003C\u002Fp\u003E\n\u003Cp\u003E点赞数据表：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-json\"\u003E{\n    \u003Cspan class=\"hljs-attribute\"\u003Eid:\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E 用户指纹，\n    likeTime\u003C\u002Fspan\u003E：点赞时间，\n    postTitle：文章标题\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EnewLike，创建点赞数据：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003Edb\u003Cspan class=\"hljs-built_in\"\u003E.collection\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E&#x27;like&#x27;\u003C\u002Fspan\u003E)\n  .\u003Cspan class=\"hljs-keyword\"\u003Ewhere\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E&quot;postTitle&quot;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E&quot;==&quot;\u003C\u002Fspan\u003E, request.body.title)\n  .get()\n  .\u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E(res =&gt; {\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E isLike =\u003Cspan class=\"hljs-built_in\"\u003E false\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Etry\u003C\u002Fspan\u003E {\n    \u002F\u002F 判断是否已经点赞过\n    res.forEach\u003Cspan class=\"hljs-built_in\"\u003E(doc\u003C\u002Fspan\u003E =&gt; {\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003E(doc\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-built_in\"\u003E.id\u003C\u002Fspan\u003E === request.body\u003Cspan class=\"hljs-built_in\"\u003E.id\u003C\u002Fspan\u003E &amp;&amp; !isLike) {\n        isLike =\u003Cspan class=\"hljs-built_in\"\u003E true\u003C\u002Fspan\u003E\n      }\n    })\n    \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (!isLike) {\n      \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E docRef = db\u003Cspan class=\"hljs-built_in\"\u003E.collection\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E&#x27;like&#x27;\u003C\u002Fspan\u003E)\u003Cspan class=\"hljs-built_in\"\u003E.doc\u003C\u002Fspan\u003E(params\u003Cspan class=\"hljs-built_in\"\u003E.id\u003C\u002Fspan\u003E);\n      docRef.set({\n        postTitle: params.title,\n        likeTime: new Date().toLocaleString()\n      });\n      response.send({\n        data: \u003Cspan class=\"hljs-string\"\u003E&#x27;like success!&#x27;\u003C\u002Fspan\u003E,\n        code: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E\n      })\n    } \u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E {\n      response.send({\n        data: \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E,\n        message: \u003Cspan class=\"hljs-string\"\u003E&#x27;like 过啦&#x27;\u003C\u002Fspan\u003E,\n        code: \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E\n      })\n    }\n  } \u003Cspan class=\"hljs-keyword\"\u003Ecatch\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003E(error\u003C\u002Fspan\u003E) {\n    console.log(\u003Cspan class=\"hljs-string\"\u003E&#x27;error&#x27;\u003C\u002Fspan\u003E,\u003Cspan class=\"hljs-built_in\"\u003E error\u003C\u002Fspan\u003E)\n  }\n})\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EgetLikes，获取点赞数据：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003Edb\u003Cspan class=\"hljs-built_in\"\u003E.collection\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E&#x27;like&#x27;\u003C\u002Fspan\u003E)\n  .\u003Cspan class=\"hljs-keyword\"\u003Ewhere\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E&quot;postTitle&quot;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E&quot;==&quot;\u003C\u002Fspan\u003E, title)\n  .get()\n  .\u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E(res =&gt; {\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E isLike =\u003Cspan class=\"hljs-built_in\"\u003E false\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Etry\u003C\u002Fspan\u003E {\n    res.forEach\u003Cspan class=\"hljs-built_in\"\u003E(doc\u003C\u002Fspan\u003E =&gt; {\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003E(doc\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-built_in\"\u003E.id\u003C\u002Fspan\u003E ===\u003Cspan class=\"hljs-built_in\"\u003E id\u003C\u002Fspan\u003E &amp;&amp; !isLike) {\n        isLike =\u003Cspan class=\"hljs-built_in\"\u003E true\u003C\u002Fspan\u003E\n      }\n    })\n  } \u003Cspan class=\"hljs-keyword\"\u003Ecatch\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003E(error\u003C\u002Fspan\u003E) {\n    console.log(\u003Cspan class=\"hljs-string\"\u003E&#x27;error&#x27;\u003C\u002Fspan\u003E,\u003Cspan class=\"hljs-built_in\"\u003E error\u003C\u002Fspan\u003E)\n  }\n  response.send({\n    data: res.size,\n    isLike,\n    message: \u003Cspan class=\"hljs-string\"\u003E&#x27;oooooooook&#x27;\u003C\u002Fspan\u003E,\n    code: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E\n  })\n})\n  .\u003Cspan class=\"hljs-keyword\"\u003Ecatch\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-built_in\"\u003E(error\u003C\u002Fspan\u003E =&gt; {\n  response.send({\n    data:\u003Cspan class=\"hljs-built_in\"\u003E error\u003C\u002Fspan\u003E,\n    message: request.body,\n    code: \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E\n  })\n})\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E在函数编写之后，执行命令就可以部署到云端啦。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003Efirebase \u003Cspan class=\"hljs-keyword\"\u003Edeploy\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003E--only\u003C\u002Fspan\u003E functions\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 id=\"用户端\"\u003E用户端\u003C\u002Fh2\u003E\n\u003Cp\u003E在博客页面上生成用户唯一ID后用fetch请求点赞接口就可以了。\u003C\u002Fp\u003E\n\u003Cp\u003E另外，跨域问题需要函数端用上cors处理。详细的都可以在\u003Ca target='_blank'  href=\"https:\u002F\u002Fgithub.com\u002FGzhiYi\u002Fblog-like\"\u003E仓库\u003C\u002Fa\u003E看到。\u003C\u002Fp\u003E\n\u003Ch2 id=\"体验\"\u003E体验\u003C\u002Fh2\u003E\n\u003Cp\u003E最后说一下体验。整个开发过程比较愉快，花了点点时间查阅数据库操作语法。上线尝试访问，发现google的果然访问好慢！\u003C\u002Fp\u003E\n\u003Cp\u003E你可以点击下面clap按钮试试，如果没有，说明网络问题，unreachable。\u003C\u002Fp\u003E\n"}}}("用firebase给静态博客页面增加点赞功能"))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.1c84caa9.js"}catch(e){main="/client/legacy/client.80874f6f.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-170295070-1"></script> <script> window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-170295070-1'); </script> 